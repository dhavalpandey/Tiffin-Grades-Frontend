(this.webpackJsonptiffingrades=this.webpackJsonptiffingrades||[]).push([[0],{12:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),i=n(4),r=n.n(i),c=(n(12),n(7)),l=Object(o.createContext)({}),s=function(){return!!localStorage.getItem("google_id")},g=n(0);function u(){return Object(g.jsx)("div",{children:Object(g.jsxs)("h1",{children:["Hello, ",localStorage.getItem("name")]})})}var d=n(3),j=n.n(d),f=n(5),p=n(6);n(15);function m(){var e=function(e){alert("Login Failed, please try again"),localStorage.clear(),window.location.reload()},t=function(){var t=Object(f.a)(j.a.mark((function t(n){var o,a,i,r,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.wa,a=n.profileObj.email,i=n.profileObj.name,r=n.profileObj.givenName,c=n.profileObj.imageUrl.slice(8),localStorage.setItem("google_id",n.wa),localStorage.setItem("name",n.profileObj.givenName),localStorage.setItem("image",n.profileObj.imageUrl),t.next=10,fetch("https://tiffingrades-api.herokuapp.com/signup",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({googleId:o,email:a,fullName:i,firstName:r,imageUrl:c})}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?(alert(e.message),window.location.reload()):(alert(e.message),localStorage.clear(),window.location.reload())})).catch((function(t){e()}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(g.jsx)("div",{className:"login",children:Object(g.jsx)(p.GoogleLogin,{className:"login-btn",clientId:"1029185512831-qvr0he0tk57qv6t8mp35f7t200vnn8jb.apps.googleusercontent.com",onSuccess:t,onFailure:e,buttonText:"Login with Google",cookiePolicy:"single_host_origin"})})}var b=function(){var e=Object(o.useState)(s),t=Object(c.a)(e,2),n=t[0],a=t[1];return n?Object(g.jsx)(l.Provider,{value:{loggedIn:n,setLoggedIn:a},children:Object(g.jsx)(u,{})}):Object(g.jsx)(l.Provider,{value:{loggedIn:n,setLoggedIn:a},children:Object(g.jsx)(m,{})})};r.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(b,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.7c11a079.chunk.js.map